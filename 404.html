<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Redirecting...</title>
    <script>
    // GitHub Pages 404.html Redirect Handler
    (function() {
        // Service pages mapping - all 65+ services
        var services = [
            'soundbar-setup', 'home-theater-installation', 'tv-mounting', 'audio-visual',
            'custom-ramps', 'ada-compliant-showers', 'bathroom-accessibility', 'grab-bar-installation',
            'non-slip-flooring', 'home-remodeling', 'bathroom-remodels', 'kitchen-renovations',
            'custom-cabinets', 'countertop-repair', 'room-additions', 'basement-finishing',
            'drywall-repair', 'painting-drywall', 'home-audio', 'sound-system-setup',
            'projector-install', 'cable-management', 'deck-construction', 'patio-construction',
            'fence-installation', 'concrete-pouring', 'driveway-installation', 'concrete-repair',
            'property-maintenance', 'emergency-snow', 'lawn-maintenance', 'landscape-design',
            'garden-maintenance', 'fertilization', 'seasonal-cleanup', 'gutter-cleaning',
            'pressure-washing', 'handyman-services', 'emergency-repairs', 'flooring-installation',
            'hardwood-flooring', 'floor-refinishing', 'fence-repair', 'custom-storage',
            'cabinet-refacing', 'kitchen-cabinetry', 'onyx-countertops', 'painting-services',
            'handyman-repair-services', 'grab-bars', 'non-slip-flooring-solutions', 'ada-compliant-showers-bathrooms',
            'home-remodeling-renovation', 'senior-safety', 'wheelchair-ramp-installation', 'siding-replacement',
            'snow-removal', 'seasonal-prep', 'tree-trimming', 'tv-home-theater-installation',
            'tv-mounting-residential', 'smart-audio', 'window-doors', 'stairlift-elevator-installation'
        ];

        // Get current URL components
        var path = window.location.pathname;
        var search = window.location.search;
        var hash = window.location.hash;
        var newPath = path;
        var redirectUrl = '';

        console.log('Original URL:', path);

        // 1. Handle service-pages/ to services/ redirect
        if (path.includes('/service-pages/')) {
            newPath = path.replace('/service-pages/', '/services/');
            console.log('Redirecting service-pages to services:', newPath);
        }

        // 2. Remove .html extension if present
        if (newPath.endsWith('.html')) {
            newPath = newPath.slice(0, -5);
            console.log('Removed .html:', newPath);
        }

        // 3. Remove trailing slash if present (except for root)
        if (newPath.endsWith('/') && newPath !== '/') {
            newPath = newPath.slice(0, -1);
            console.log('Removed trailing slash:', newPath);
        }

        // 4. Check if this is a service page
        var isServicePage = services.some(function(service) {
            return newPath.endsWith('/' + service);
        });

        // 5. If it's a service page, ensure it's in the /services/ directory
        if (isServicePage && !newPath.startsWith('/services/')) {
            var serviceName = newPath.substring(newPath.lastIndexOf('/') + 1);
            newPath = '/services/' + serviceName;
            console.log('Moved to services directory:', newPath);
        }

        // 6. If the path changed or this is a service page, redirect
        if (newPath !== path || isServicePage) {
            redirectUrl = newPath + (search || '') + (hash || '');
            console.log('Final redirect URL:', redirectUrl);
            window.location.href = redirectUrl;
            return;
        }

        // 7. Fallback: Redirect to homepage if no other rules matched
        console.log('No specific redirect rule matched, going to homepage');
        window.location.href = '/';
    })();
    </script>
    <!-- Fallback meta refresh in case JavaScript is disabled -->
    <meta http-equiv="refresh" content="0; url=/" />
</head>
<body>
    <h1>Redirecting...</h1>
    <p>If you are not redirected automatically, please <a href="/">click here</a>.</p>
</body>
</html>